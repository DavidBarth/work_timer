<!DOCTYPE html>
<html>
<head>
  <title>Work Timer</title>
  <%= stylesheet_link_tag 'scaffold', 'main' %>
  <%= javascript_include_tag :defaults %>
  <%= csrf_meta_tag %>
</head>
<body>
  <% if flash[:notice] %>
    <div id="flash"><%= flash[:notice] %></div>
  <% end %>

  <div id="status">
    <% if current_events.size > 0 %>
      <% current_events.each do |event| %>
        <div class="running_time">
          <div class="start_stop">
            <%= link_to 'Stop', stop_event_path(event), :confirm => 'Are you sure you want to stop this event?', :method => :put %>
          </div>
          <div class="time">
            <%= number_with_precision((Time.now - event.start) / 3600, :precision => 2) %>
          </div>
        </div>
        <div class="info">
          <strong><%= link_to event.expanded_title, event %></strong><br />
          <strong>Started:</strong> <%= event.start.strftime('%H:%M') %><br />
          <strong>Comment:</strong> <%= truncate(event.comment, :length => 30, :separator => ' ') %>
        </div>
      <% end %>
    <% else %>
      <div class="running_time">
        <div class="start_stop">
          <%= link_to 'New Event', new_event_path %>
        </div>
        <div class="time">
          0.00
        </div>
      </div>
      <div class="info">
        <strong>Clock Stopped</strong>
      </div>
    <% end %>
  </div>
  
  <div id="menu">
    <%= link_to 'Events', events_path %> &middot;
    <%= link_to 'Clients', clients_path %>
  </div>

  <div id="content">
    <%= yield %>
  </div>

  <div id="footer">
    Work Timer &middot;
    <a href="http://boonedocks.net/">boonedocks.net</a> &middot;
    <a href="http://twitter.com/#!/boonedocks">boonedocks on Twitter</a> &middot;
    <a href="http://github.com/boone/work_timer">Source Code</a>
  </div>

</body>
</html>
